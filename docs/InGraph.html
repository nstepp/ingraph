<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>InGraph</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_InGraph.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ingraph</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">InGraph</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Types
</a></li><li><a href="#g:2">Functions
</a><ul><li><a href="#g:3">Graph handling routines
</a></li><li><a href="#g:4">Mathematical Utilities
</a></li><li><a href="#g:5">Graph queries
</a></li><li><a href="#g:6">Optimization
</a><ul><li><a href="#g:7">Hamiltonian Functions
</a></li><li><a href="#g:8">Optimizers
</a></li></ul></li><li><a href="#g:9">Graph measures
</a></li></ul></li><li><a href="#g:10">Misc
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Ingress Graph module.
 The routines in this module support optimizing links between
 portals in the game Ingress.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Vector">Vector</a> a = <a href="#v:Vec">Vec</a> (a, a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Portal">Portal</a> = (String, <a href="InGraph.html#t:Vector">Vector</a> Float)</li><li class="src short"><span class="keyword">type</span> <a href="#t:PortalGraph">PortalGraph</a> = Gr <a href="InGraph.html#t:Portal">Portal</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:Hamiltonian">Hamiltonian</a> = Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:emptyGraph">emptyGraph</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:addPortals">addPortals</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [<a href="InGraph.html#t:Portal">Portal</a>] -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:newNode">newNode</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node</li><li class="src short"><a href="#v:stripEdges">stripEdges</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:mean">mean</a> :: (Real a, Fractional b) =&gt; [a] -&gt; b</li><li class="src short"><a href="#v:std">std</a> :: (Real a, Fractional b) =&gt; [a] -&gt; b</li><li class="src short"><a href="#v:dot">dot</a> :: Num a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</li><li class="src short"><a href="#v:norm">norm</a> :: Floating a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</li><li class="src short"><a href="#v:cross2D">cross2D</a> :: Num a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</li><li class="src short"><a href="#v:vecAngle">vecAngle</a> :: Floating a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</li><li class="src short"><a href="#v:linksCross">linksCross</a> :: (<a href="InGraph.html#t:Portal">Portal</a>, <a href="InGraph.html#t:Portal">Portal</a>) -&gt; (<a href="InGraph.html#t:Portal">Portal</a>, <a href="InGraph.html#t:Portal">Portal</a>) -&gt; Bool</li><li class="src short"><a href="#v:adjFields">adjFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; [(Node, Node)]</li><li class="src short"><a href="#v:getFields">getFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [[Node]]</li><li class="src short"><a href="#v:portalVec">portalVec</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; <a href="InGraph.html#t:Vector">Vector</a> Float</li><li class="src short"><a href="#v:isCoveredBy">isCoveredBy</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; [Node] -&gt; Bool</li><li class="src short"><a href="#v:isCovered">isCovered</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; Bool</li><li class="src short"><a href="#v:countCoverings">countCoverings</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; Int</li><li class="src short"><a href="#v:fieldArea">fieldArea</a> :: <a href="InGraph.html#t:Portal">Portal</a> -&gt; <a href="InGraph.html#t:Portal">Portal</a> -&gt; <a href="InGraph.html#t:Portal">Portal</a> -&gt; Float</li><li class="src short"><a href="#v:fieldAreaG">fieldAreaG</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; Node -&gt; Node -&gt; Float</li><li class="src short"><a href="#v:makesCross">makesCross</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; (Node, Node) -&gt; Bool</li><li class="src short"><a href="#v:hamiltonianFlynn">hamiltonianFlynn</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianFields">hamiltonianFields</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianLinks">hamiltonianLinks</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianDegree">hamiltonianDegree</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianLinkDefense">hamiltonianLinkDefense</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianAP">hamiltonianAP</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianRatio">hamiltonianRatio</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:hamiltonianUCLA">hamiltonianUCLA</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</li><li class="src short"><a href="#v:portalEnergy">portalEnergy</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; Float</li><li class="src short"><a href="#v:metropolisWith">metropolisWith</a> :: <a href="InGraph.html#t:Hamiltonian">Hamiltonian</a> -&gt; StdGen -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float -&gt; Int -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:fieldMetropolisWith">fieldMetropolisWith</a> :: <a href="InGraph.html#t:Hamiltonian">Hamiltonian</a> -&gt; StdGen -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float -&gt; Int -&gt; [[Node]] -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:randomField">randomField</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; StdGen -&gt; [Node]</li><li class="src short"><a href="#v:perturbGraphFields">perturbGraphFields</a> :: (StdGen, Gr <a href="InGraph.html#t:Portal">Portal</a> (), [[Node]]) -&gt; (StdGen, <a href="InGraph.html#t:PortalGraph">PortalGraph</a>, [[Node]])</li><li class="src short"><a href="#v:graphFromFields">graphFromFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [[Node]] -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:perturbGraph">perturbGraph</a> :: (StdGen, <a href="InGraph.html#t:PortalGraph">PortalGraph</a>) -&gt; (StdGen, <a href="InGraph.html#t:PortalGraph">PortalGraph</a>)</li><li class="src short"><a href="#v:graphOptimizeWith">graphOptimizeWith</a> :: <a href="InGraph.html#t:Hamiltonian">Hamiltonian</a> -&gt; Float -&gt; Int -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li><li class="src short"><a href="#v:countLinks">countLinks</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Int</li><li class="src short"><a href="#v:countFields">countFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Int</li><li class="src short"><a href="#v:rankPortals">rankPortals</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [<a href="InGraph.html#t:Portal">Portal</a>]</li><li class="src short"><a href="#v:rankPortalNodes">rankPortalNodes</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [Node]</li><li class="src short"><a href="#v:graphStats">graphStats</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; (Int, Int, Int, Int)</li><li class="src short"><a href="#v:portals">portals</a> :: [([Char], <a href="InGraph.html#t:Vector">Vector</a> Float)]</li><li class="src short"><a href="#v:northSaMo">northSaMo</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></li></ul></div><div id="interface"><h1 id="g:1">Types
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Vector" class="def">Vector</a> a </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Vec" class="def">Vec</a> (a, a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Vector" class="caption collapser" onclick="toggleSection('i:Vector')">Instances</p><div id="section.i:Vector" class="show"><table><tr><td class="src">Functor <a href="InGraph.html#t:Vector">Vector</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Eq a =&gt; Eq (<a href="InGraph.html#t:Vector">Vector</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Num a =&gt; Num (<a href="InGraph.html#t:Vector">Vector</a> a)</td><td class="doc"><p>Allow math to be used with a <code><a href="InGraph.html#t:Vector">Vector</a></code>
</p></td></tr><tr><td class="src">Show a =&gt; Show (<a href="InGraph.html#t:Vector">Vector</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Portal" class="def">Portal</a> = (String, <a href="InGraph.html#t:Vector">Vector</a> Float)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PortalGraph" class="def">PortalGraph</a> = Gr <a href="InGraph.html#t:Portal">Portal</a> ()</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Hamiltonian" class="def">Hamiltonian</a> = Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p></div><h1 id="g:2">Functions
</h1><h2 id="g:3">Graph handling routines
</h2><div class="top"><p class="src"><a name="v:emptyGraph" class="def">emptyGraph</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></p></div><div class="top"><p class="src"><a name="v:addPortals" class="def">addPortals</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [<a href="InGraph.html#t:Portal">Portal</a>] -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></p><div class="doc"><p>Add a list of portals to a portal graph
</p></div></div><div class="top"><p class="src"><a name="v:newNode" class="def">newNode</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node</p><div class="doc"><p>Determine the id of the next node to add
</p></div></div><div class="top"><p class="src"><a name="v:stripEdges" class="def">stripEdges</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></p><div class="doc"><p>Remove all of the edges from a graph
</p></div></div><h2 id="g:4">Mathematical Utilities
</h2><div class="top"><p class="src"><a name="v:mean" class="def">mean</a> :: (Real a, Fractional b) =&gt; [a] -&gt; b</p><div class="doc"><p>Arithmetic mean
</p></div></div><div class="top"><p class="src"><a name="v:std" class="def">std</a> :: (Real a, Fractional b) =&gt; [a] -&gt; b</p><div class="doc"><p>Standard deviation
</p></div></div><div class="top"><p class="src"><a name="v:dot" class="def">dot</a> :: Num a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</p><div class="doc"><p>Vector dot product
</p></div></div><div class="top"><p class="src"><a name="v:norm" class="def">norm</a> :: Floating a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</p><div class="doc"><p>Vector length
</p></div></div><div class="top"><p class="src"><a name="v:cross2D" class="def">cross2D</a> :: Num a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</p><div class="doc"><p>Two dimensional cross product, used for link crossing
</p></div></div><div class="top"><p class="src"><a name="v:vecAngle" class="def">vecAngle</a> :: Floating a =&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; <a href="InGraph.html#t:Vector">Vector</a> a -&gt; a</p><div class="doc"><p>Vector angle
</p></div></div><h2 id="g:5">Graph queries
</h2><div class="top"><p class="src"><a name="v:linksCross" class="def">linksCross</a> :: (<a href="InGraph.html#t:Portal">Portal</a>, <a href="InGraph.html#t:Portal">Portal</a>) -&gt; (<a href="InGraph.html#t:Portal">Portal</a>, <a href="InGraph.html#t:Portal">Portal</a>) -&gt; Bool</p><div class="doc"><p>Determine whether or not links between two pairs of portals
 cross
</p></div></div><div class="top"><p class="src"><a name="v:adjFields" class="def">adjFields</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>Graph to analyze
</p></td></tr><tr><td class="src">-&gt; Node</td><td class="doc"><p>Find fields with this node as a vertex
</p></td></tr><tr><td class="src">-&gt; [(Node, Node)]</td><td class="doc"><p>A list containing pairs of vertices that
 make a trianlge with the given reference vertex
</p></td></tr></table></div><div class="doc"><p>Count the number of fields adjacent to a portal.
 Returns a list of endpoint pairs for each triangle.
 For instance:
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>adjFields g 1
</code></strong>[(2,3),(3,4)]
</pre><p>Specifies that node 1 makes triangles (1,2,3) and (1,3,4).
</p></div></div><div class="top"><p class="src"><a name="v:getFields" class="def">getFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [[Node]]</p><div class="doc"><p>Return a collection of fields present in a graph.
 Fields are returned as a list of node lists. Each
 node list contains the 3 nodes that make up a particular
 field.
</p></div></div><div class="top"><p class="src"><a name="v:portalVec" class="def">portalVec</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; <a href="InGraph.html#t:Vector">Vector</a> Float</p><div class="doc"><p>Extract the position of a portal
</p></div></div><div class="top"><p class="src"><a name="v:isCoveredBy" class="def">isCoveredBy</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Node</td><td class="doc"><p>The portal node id
</p></td></tr><tr><td class="src">-&gt; [Node]</td><td class="doc"><p>Three element list of field vertices
</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Determine whether a portal is covered by a particular field
</p></div></div><div class="top"><p class="src"><a name="v:isCovered" class="def">isCovered</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Node</td><td class="doc"><p>The portal node id
</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Determine whether a portal is covered by any field
</p></div></div><div class="top"><p class="src"><a name="v:countCoverings" class="def">countCoverings</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Node</td><td class="doc"><p>The portal node id
</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Number of covering fields
</p></td></tr></table></div><div class="doc"><p>Count how many fields are covering a portal
</p></div></div><div class="top"><p class="src"><a name="v:fieldArea" class="def">fieldArea</a> :: <a href="InGraph.html#t:Portal">Portal</a> -&gt; <a href="InGraph.html#t:Portal">Portal</a> -&gt; <a href="InGraph.html#t:Portal">Portal</a> -&gt; Float</p><div class="doc"><p>Calculate the area covered by a field
</p></div></div><div class="top"><p class="src"><a name="v:fieldAreaG" class="def">fieldAreaG</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Node -&gt; Node -&gt; Node -&gt; Float</p><div class="doc"><p>Calculate the area covered by a field,
 using graph node numbers
</p></div></div><div class="top"><p class="src"><a name="v:makesCross" class="def">makesCross</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (Node, Node)</td><td class="doc"><p>Tuple containing from and to portal ids
</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Determine whether a potential link would cross
 an existing link
</p></div></div><h2 id="g:6">Optimization
</h2><h3 id="g:7">Hamiltonian Functions
</h3><div class="top"><p class="src"><a name="v:hamiltonianFlynn" class="def">hamiltonianFlynn</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for the &quot;Save Flynn&quot; event
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianFields" class="def">hamiltonianFields</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for maximizing the number of fields.
 This function has a hard time when optimizing in link mode.
 For best results, use in field mode.
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianLinks" class="def">hamiltonianLinks</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for maximizing global number of links.
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianDegree" class="def">hamiltonianDegree</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for maximizing degree, while keeping the degree
 as constant as possible.
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianLinkDefense" class="def">hamiltonianLinkDefense</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for maximizing portal defense due to links.
 There is a defensive boost to shields according to
</p><pre> Boost = 4/9 * atan(L/exp(1))
</pre><p>where L is the number of links.
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianAP" class="def">hamiltonianAP</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for maximizing AP due to creating links and fields
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianRatio" class="def">hamiltonianRatio</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for minimizing the ratio of AP to destroy to AP to create.
</p></div></div><div class="top"><p class="src"><a name="v:hamiltonianUCLA" class="def">hamiltonianUCLA</a> :: Float -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Float</p><div class="doc"><p>Hamiltonian for maximizing the score at the UCLA Warp Break event
</p></div></div><div class="top"><p class="src"><a name="v:portalEnergy" class="def">portalEnergy</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Float</td><td class="doc"><p>Importance of making fields, 0 to 1
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>The current graph
</p></td></tr><tr><td class="src">-&gt; Node</td><td class="doc"><p>Calculate the energy of this node
</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>Returns portal energy
</p></td></tr></table></div><div class="doc"><p>Calculate the energy of a single portal.
 Energy is defined to be the ratio of AP
 due to destruction over AP due to creation.
 This is then scaled by the number of fields.
</p></div></div><h3 id="g:8">Optimizers
</h3><div class="top"><p class="src"><a name="v:metropolisWith" class="def">metropolisWith</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:Hamiltonian">Hamiltonian</a></td><td class="doc"><p>Hamliltonian function
</p></td></tr><tr><td class="src">-&gt; StdGen</td><td class="doc"><p>Random number generator
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>Graph to optimize
</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>Importance of making fields, 0 to 1
</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Maximum number of iterations
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>Returns the optimized graph
</p></td></tr></table></div><div class="doc"><p>Implement a simple metropolis algorithm for minimizing
 the hamiltonian of a portal graph
</p></div></div><div class="top"><p class="src"><a name="v:fieldMetropolisWith" class="def">fieldMetropolisWith</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:Hamiltonian">Hamiltonian</a></td><td class="doc"><p>Hamliltonian function
</p></td></tr><tr><td class="src">-&gt; StdGen</td><td class="doc"><p>Random number generator
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>Graph to optimize
</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>Importance of making fields, 0 to 1
</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>Maximum number of iterations
</p></td></tr><tr><td class="src">-&gt; [[Node]]</td><td class="doc"><p>List of fields
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>Returns the optimized graph
</p></td></tr></table></div><div class="doc"><p>Implement a simple metropolis algorithm for minimizing
 the hamiltonian of a portal graph
</p></div></div><div class="top"><p class="src"><a name="v:randomField" class="def">randomField</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; StdGen -&gt; [Node]</p><div class="doc"><p>Generate a random field
</p></div></div><div class="top"><p class="src"><a name="v:perturbGraphFields" class="def">perturbGraphFields</a> :: (StdGen, Gr <a href="InGraph.html#t:Portal">Portal</a> (), [[Node]]) -&gt; (StdGen, <a href="InGraph.html#t:PortalGraph">PortalGraph</a>, [[Node]])</p><div class="doc"><p>Create a random modification to a graph, at the level of fielids
 Pick 3 random nodes
 If legal, add it to a list of fields in the graph.
 If illegal, remove a field and repeat
</p></div></div><div class="top"><p class="src"><a name="v:graphFromFields" class="def">graphFromFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [[Node]] -&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></p></div><div class="top"><p class="src"><a name="v:perturbGraph" class="def">perturbGraph</a> :: (StdGen, <a href="InGraph.html#t:PortalGraph">PortalGraph</a>) -&gt; (StdGen, <a href="InGraph.html#t:PortalGraph">PortalGraph</a>)</p><div class="doc"><p>Create a random modification to a graph.
 Pick a link to toggle on or off.
 Continue toggling links until one of the toggles adds a link.
 This is because the hamiltonian will nearly always judge removal of a link as a higher energy state.
</p></div></div><div class="top"><p class="src"><a name="v:graphOptimizeWith" class="def">graphOptimizeWith</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:Hamiltonian">Hamiltonian</a></td><td class="doc"><p>Hamiltonian function
</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>fieldGain: Importance of making fields, from 0 to 1
</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>maxIter: Maximum optimzation iterations
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>portalGraph: Graph to optimize
</p></td></tr><tr><td class="src">-&gt; <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>Returns optimized graph
</p></td></tr></table></div><div class="doc"><p>Optimize the links among a collection of nodes.
</p></div></div><h2 id="g:9">Graph measures
</h2><div class="top"><p class="src"><a name="v:countLinks" class="def">countLinks</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Int</p><div class="doc"><p>Count the total number of links in a graph
</p></div></div><div class="top"><p class="src"><a name="v:countFields" class="def">countFields</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; Int</p><div class="doc"><p>Count the total number of fields created by links in a graph
</p></div></div><div class="top"><p class="src"><a name="v:rankPortals" class="def">rankPortals</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [<a href="InGraph.html#t:Portal">Portal</a>]</p><div class="doc"><p>Rank portals by importance. See <a href="rankPortalNodes.html">rankPortalNodes</a>.
</p></div></div><div class="top"><p class="src"><a name="v:rankPortalNodes" class="def">rankPortalNodes</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a> -&gt; [Node]</p><div class="doc"><p>Rank portal nodes according to how important they are.
 Importance is ranked by AP due to destruction.
</p></div></div><div class="top"><p class="src"><a name="v:graphStats" class="def">graphStats</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></td><td class="doc"><p>The graph to analyze
</p></td></tr><tr><td class="src">-&gt; (Int, Int, Int, Int)</td><td class="doc"><p>Returns enemy AP, friendly AP,
   the number of fields, and links  as a tuple
</p></td></tr></table></div><div class="doc"><p>Calculate some descriptive numbers summarizing a graph.
 Return a tuple of (Enemy AP, Friendly AP, Number of Fields)
</p></div></div><h1 id="g:10">Misc
</h1><div class="top"><p class="src"><a name="v:portals" class="def">portals</a> :: [([Char], <a href="InGraph.html#t:Vector">Vector</a> Float)]</p></div><div class="top"><p class="src"><a name="v:northSaMo" class="def">northSaMo</a> :: <a href="InGraph.html#t:PortalGraph">PortalGraph</a></p><div class="doc"><p>Sample portal graph, for testing
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.1</p></div></body></html>